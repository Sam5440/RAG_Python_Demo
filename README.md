# RAGçŸ¥è¯†åº“ç³»ç»Ÿï¼ˆPythonå®ç°ç‰ˆï¼‰

ğŸ“š ä¸€ä¸ªåŸºäºæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰çš„ä¸ªäººçŸ¥è¯†åº“ç³»ç»Ÿæœ€ç®€Demoï¼Œé€‚åˆåˆå­¦è€…å­¦ä¹ AIåº”ç”¨å¼€å‘

> ç°åœ¨é€šè¿‡æœ¬é“¾æ¥ç‚¹å‡»æ³¨å†Œ[ç¡…åŸºæµåŠ¨](https://cloud.siliconflow.cn/i/g8snVG3G)å³å¯è·å¾— 2000ä¸‡ Tokensï¼ŒæŠ˜åˆäººæ°‘å¸14å…ƒï¼
>
> å—é‚€å¥½å‹ä½œä¸ºæ–°ç”¨æˆ·å®Œæˆ SiliconCloud è´¦å·æ³¨å†Œï¼Œç«‹åˆ»è·å¾— 2000ä¸‡ Tokensã€‚
>
> é“¾æ¥ï¼š[https://cloud.siliconflow.cn/i/g8snVG3G](https://cloud.siliconflow.cn/i/g8snVG3G)

> **æ›´æ–°äº2025.2.19,æ‰€æœ‰å†…å®¹åŸºäº `Commit:å®Œå–„æ³¨é‡Š`ç‰ˆæœ¬ä¹¦å†™ã€‚**

---

## å…¶ä»–å†…å®¹

- [RAGç³»ç»Ÿè¿è¡Œæµç¨‹è¯¦è§£ï¼ˆä»¥&#34;è¯·ä»‹ç»ä¸‹åˆ˜èŠ³&#34;ä¸ºä¾‹ï¼‰](docs/Flow.md)

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

- è‡ªåŠ¨æ–‡æœ¬å‘é‡åŒ–ï¼šå°†çŸ¥è¯†åº“å†…å®¹è½¬æ¢ä¸ºAIå¯ç†è§£çš„æ•°å­—å½¢å¼
- æ™ºèƒ½æ£€ç´¢ï¼šé€šè¿‡è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…æœ€ç›¸å…³çŸ¥è¯†
- å¯¹è¯ç”Ÿæˆï¼šåŸºäºå¤§æ¨¡å‹ç”Ÿæˆè‡ªç„¶è¯­è¨€å›ç­”
- æŒä¹…åŒ–å­˜å‚¨ï¼šè‡ªåŠ¨ä¿å­˜å‘é‡æ•°æ®ï¼Œå‡å°‘é‡å¤è®¡ç®—
- å®Œæ•´æ—¥å¿—ï¼šè®°å½•ç³»ç»Ÿè¿è¡Œçš„æ¯ä¸ªæ­¥éª¤

## ğŸ¯ å·¥ä½œåŸç†

```mermaid
graph LR
A[ç”¨æˆ·é—®é¢˜] --> B(é—®é¢˜å‘é‡åŒ–)
B --> C{ç›¸ä¼¼åº¦è®¡ç®—}
C --> D[Top3ç»“æœ]
D --> E[ç”Ÿæˆå›ç­”]
F[çŸ¥è¯†åº“] --> G[æ–‡æœ¬æ‹†åˆ†]
G --> H[æ‰¹é‡å‘é‡åŒ–]
H --> I[å‘é‡å­˜å‚¨]
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

1. Python 3.8+
2. ç”³è¯·APIå¯†é’¥ï¼ˆ[ç¡…åŸºæµåŠ¨](https://cloud.siliconflow.cn/i/g8snVG3G)ï¼‰

### å®‰è£…ä¾èµ–

```bash
pip install numpy requests python-dotenv
```

### é…ç½®è®¾ç½®

å¤åˆ¶é…ç½®æ–‡ä»¶

```bash
cp config_template.json config.json
```

å¡«å†™è·å¾—çš„APIå¯†é’¥

### è¿è¡Œç¤ºä¾‹

```bash
python index.py
```

## ğŸ“‚ ä»£ç ç»“æ„

```
.
â”œâ”€â”€ logger.py          # æ—¥å¿—ç³»ç»Ÿï¼ˆè‡ªåŠ¨è®°å½•è¿è¡Œç»†èŠ‚ï¼‰
â”œâ”€â”€ kb.py              # çŸ¥è¯†åº“å¤„ç†ï¼ˆå‘é‡åŒ–/æ£€ç´¢ï¼‰
â”œâ”€â”€ rag.py             # RAGæ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ api.py             # å¤§æ¨¡å‹APIäº¤äº’
â”œâ”€â”€ index.py           # ç¤ºä¾‹è°ƒç”¨
â”œâ”€â”€ config.json        # é…ç½®æ–‡ä»¶
â””â”€â”€ ç§äººçŸ¥è¯†åº“.txt       # ç¤ºä¾‹çŸ¥è¯†åº“
```

## âš™ï¸ é…ç½®è¯´æ˜ï¼ˆconfig.jsonï¼‰

```json
{
  "api": {
    "key": "your_api_key",  // å¿…å¡«
    "base_url": "https://api.siliconflow.cn/v1"
  },
  "models": {
    "embedding": "Pro/BAAI/bge-m3",      // å‘é‡ç”Ÿæˆæ¨¡å‹
    "chat": "Qwen/Qwen2.5-72B-Instruct-128K"  // å¯¹è¯æ¨¡å‹
  },
  "retrieval": {
    "top_k": 3  // è¿”å›æœ€ç›¸ä¼¼ç»“æœæ•°
  }
}
```

## ğŸ“– è¿è¡Œç¤ºä¾‹

### é—®é¢˜ï¼šè¯·ä»‹ç»ä¸‹åˆ˜èŠ³

```python
# index.py
msg = rag.chat('è¯·ä»‹ç»ä¸‹åˆ˜èŠ³')
```

### ç³»ç»Ÿè¾“å‡º

```
é—®é¢˜1ï¼šè¯·ä»‹ç»ä¸‹åˆ˜èŠ³
å›ç­”ï¼šåˆ˜èŠ³æ˜¯MISéƒ¨é—¨çš„æˆå‘˜ï¼Œæ€§åˆ«å¥³ï¼Œæ¥è‡ªå¹¿ä¸œæ·±åœ³ã€‚å¥¹çš„è”ç³»ç”µè¯æ˜¯13711223344ï¼Œçˆ±å¥½åŒ…æ‹¬ç‘œä¼½å’Œç»˜ç”»ã€‚
```

### è¿è¡Œè¿‡ç¨‹è§£æ

1. é¦–æ¬¡è¿è¡Œè‡ªåŠ¨å‘é‡åŒ–çŸ¥è¯†åº“ï¼ˆçº¦30ç§’ï¼‰
2. å°†é—®é¢˜è½¬æ¢ä¸º768ç»´å‘é‡
3. è®¡ç®—ä¸æ‰€æœ‰æ–‡æœ¬å—çš„ä½™å¼¦ç›¸ä¼¼åº¦
4. é€‰æ‹©æœ€ç›¸ä¼¼çš„3ä¸ªç»“æœï¼ˆåˆ˜èŠ³ã€éŸ©é›ªã€å­™å©·å©·ï¼‰
5. ç»„åˆä¸Šä¸‹æ–‡ç”Ÿæˆæœ€ç»ˆå›ç­”

## â“ å¸¸è§é—®é¢˜

### Qï¼šå¦‚ä½•è·å–APIå¯†é’¥ï¼Ÿ

Aï¼šè®¿é—®[ç¡…åŸºæµåŠ¨å¹³å°](https://cloud.siliconflow.cn/i/g8snVG3G)æ³¨å†Œåç”³è¯·

### Qï¼šçŸ¥è¯†åº“æ”¯æŒå¤šå¤§æ–‡ä»¶ï¼Ÿ

Aï¼šå»ºè®®ä¸è¶…è¿‡1MBï¼Œè¿‡å¤§æ–‡ä»¶éœ€è°ƒæ•´æ‹†åˆ†é€»è¾‘

### Qï¼š`top_k`å‚æ•°çš„ä½œç”¨ï¼Ÿ

Aï¼šæ§åˆ¶è¿”å›çš„ç›¸å…³ç»“æœæ•°é‡ï¼Œæ•°å€¼è¶Šå¤§ä¸Šä¸‹æ–‡è¶Šä¸°å¯Œä½†å“åº”è¶Šæ…¢

## ğŸ¤ å‚ä¸è´¡çŒ®

æ¬¢è¿æäº¤Issueæˆ–PRï¼š

1. Forké¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼ˆgit checkout -b feature/xxxï¼‰
3. æäº¤ä¿®æ”¹ï¼ˆgit commit -m 'æ·»åŠ æ–°åŠŸèƒ½'ï¼‰
4. æ¨é€åˆ†æ”¯ï¼ˆgit push origin feature/xxxï¼‰
5. æ–°å»ºPull Request

> ğŸ’¡ æç¤ºï¼šè¿è¡Œå‰è¯·ç¡®ä¿å·²æ­£ç¡®é…ç½®APIå¯†é’¥ï¼Œé¦–æ¬¡è¿è¡Œä¼šè¿›è¡Œå‘é‡åŒ–å¤„ç†éœ€è¦è¾ƒé•¿æ—¶é—´ï¼ˆçº¦1-2åˆ†é’Ÿï¼‰

---

## å‚è€ƒ

> https://blog.csdn.net/yixiao0307/article/details/145387466

## ğŸ“œ è®¸å¯è¯

MIT License
